{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode } from \"vue\";\nimport _imports_0 from '../assets/loading-gif.gif';\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = {\n  class: \"flex-container\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  id: \"loading\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"img\", {\n  id: \"loading-image\",\n  src: _imports_0,\n  alt: \"Loading...\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_5 = {\n  id: \"tableComponent\",\n  class: \"table table-bordered table-striped\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \" Category \"), /*#__PURE__*/_createElementVNode(\"th\", null, \" Highest \"), /*#__PURE__*/_createElementVNode(\"th\", null, \" Lowest \")])], -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"td\", null, [/*#__PURE__*/_createElementVNode(\"b\", null, \"SMALL\")], -1 /* HOISTED */);\nconst _hoisted_8 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_10 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"td\", null, [/*#__PURE__*/_createElementVNode(\"b\", null, \"MEDIUM\")], -1 /* HOISTED */);\nconst _hoisted_13 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_15 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"td\", null, [/*#__PURE__*/_createElementVNode(\"b\", null, \"BIG\")], -1 /* HOISTED */);\nconst _hoisted_18 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_20 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"td\", null, [/*#__PURE__*/_createElementVNode(\"b\", null, \"LARGE\")], -1 /* HOISTED */);\nconst _hoisted_23 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_25 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_ctx.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createCommentVNode(\" here put a spinner or whatever you want to indicate that a request is in progress \"), _hoisted_4])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"table\", _hoisted_5, [_hoisted_6, _createElementVNode(\"tbody\", null, [_createCommentVNode(\" Get small car park data \"), _createElementVNode(\"tr\", null, [_hoisted_7, _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_8, \"(\" + _toDisplayString(_ctx.small_carpark.maxLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_9, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.small_carpark.maxLotItems)), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_10, \"(\" + _toDisplayString(_ctx.small_carpark.minLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_11, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.small_carpark.minLotItems)), 1 /* TEXT */)])]), _createCommentVNode(\" Get medium car park data \"), _createElementVNode(\"tr\", null, [_hoisted_12, _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_13, \"(\" + _toDisplayString(_ctx.med_carpark.maxLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_14, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.med_carpark.maxLotItems)), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_15, \"(\" + _toDisplayString(_ctx.med_carpark.minLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_16, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.med_carpark.minLotItems)), 1 /* TEXT */)])]), _createCommentVNode(\" Get big car park data \"), _createElementVNode(\"tr\", null, [_hoisted_17, _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_18, \"(\" + _toDisplayString(_ctx.big_carpark.maxLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_19, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.big_carpark.maxLotItems)), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_20, \"(\" + _toDisplayString(_ctx.big_carpark.minLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_21, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.big_carpark.minLotItems)), 1 /* TEXT */)])]), _createCommentVNode(\" Get large car park data \"), _createElementVNode(\"tr\", null, [_hoisted_22, _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_23, \"(\" + _toDisplayString(_ctx.large_carpark.maxLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_24, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.large_carpark.maxLotItems)), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"p\", _hoisted_25, \"(\" + _toDisplayString(_ctx.large_carpark.minLot) + \" lots available)\", 1 /* TEXT */), _createTextVNode(), _hoisted_26, _createTextVNode(\" \" + _toDisplayString(this.getAllCarParkNumber(_ctx.large_carpark.minLotItems)), 1 /* TEXT */)])])])])])]);\n}","map":{"version":3,"mappings":"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","names":["_imports_0","class","id","_createElementVNode","src","alt","style","_createElementBlock","_hoisted_1","_hoisted_2","_ctx","_hoisted_3","_createCommentVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","maxLot","_hoisted_9","getAllCarParkNumber","maxLotItems","_hoisted_10","minLot","_hoisted_11","minLotItems","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26"],"sourceRoot":"","sources":["/Users/vandana/car-park/src/components/ParkingLot.vue"],"sourcesContent":["<template>\n<div class=\"content\">\n     <div class=\"flex-container\">\n            <div v-if=\"loading\" id=\"loading\">\n                  <!-- here put a spinner or whatever you want to indicate that a request is in progress -->\n                  <img id=\"loading-image\" src=\"../assets/loading-gif.gif\" alt=\"Loading...\" />\n              </div>\n              <table id=\"tableComponent\" class=\"table table-bordered table-striped\">\n                  <thead>\n                    <tr>\n                      <th> \n                        Category\n                      </th>\n                      <th> \n                        Highest\n                      </th>\n                      <th> \n                        Lowest\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                      <!-- Get small car park data -->\n                      <tr>\n                      <td><b>SMALL</b></td>\n                      <td>\n                        <p style=\"color:red;\">({{small_carpark.maxLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(small_carpark.maxLotItems)}}\n                      </td>\n                      <td>\n                        <p style=\"color:red;\">({{small_carpark.minLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(small_carpark.minLotItems)}}\n                      </td>\n                    </tr>\n\n                    <!-- Get medium car park data -->\n                    <tr>\n                      <td><b>MEDIUM</b></td>\n                      <td>\n                        <p style=\"color:red;\">({{med_carpark.maxLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(med_carpark.maxLotItems)}}\n                      </td>\n                      <td>\n                        <p style=\"color:red;\">({{med_carpark.minLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(med_carpark.minLotItems)}}\n                      </td>\n                    </tr>\n\n                    <!-- Get big car park data -->\n                    <tr>\n                      <td><b>BIG</b></td>\n                      <td>\n                        <p style=\"color:red;\">({{big_carpark.maxLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(big_carpark.maxLotItems)}}\n                      </td>\n                      <td>\n                        <p style=\"color:red;\">({{big_carpark.minLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(big_carpark.minLotItems)}}\n                      </td>\n                    </tr>\n\n                    <!-- Get large car park data -->\n                    <tr>\n                      <td><b>LARGE</b></td>\n                      <td>\n                        <p style=\"color:red;\">({{large_carpark.maxLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(large_carpark.maxLotItems)}}\n                      </td>\n                      <td>\n                        <p style=\"color:red;\">({{large_carpark.minLot }} lots available)</p> <br/>\n                        {{this.getAllCarParkNumber(large_carpark.minLotItems)}}\n                      </td>\n                    </tr>\n                  </tbody>\n              </table> \n      </div>\n    </div>\n</template>\n\n<script>\n\n/**\n * @author Vandana Pareek\n * @version 0.0.1\n */\n\nimport { defineComponent } from \"vue\";\nimport axios from 'axios'\n\nexport default defineComponent({\n  components: { },\n  data() {\n      return {\n        items:[],\n        small_carpark:{minLot:0 ,minLotItems:[], maxLot:0, maxLotItems:[]},\n        med_carpark:{minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]},\n        big_carpark:{minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]},\n        large_carpark:{minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]},\n        timer: null,\n        loading: false\n      }\n   },\n   mounted() {\n     //Retrieve car park data\n     this.getCarParkData();\n      this.timer = setInterval(() => {\n        this.resetData();\n        this.getCarParkData();\n      }, 60000)\n    },\n    methods:{\n      resetData(){\n        this.loading = true;\n        this.small_carpark = {minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]};\n        this.med_carpark = {minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]};\n        this.big_carpark = {minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]};\n        this.large_carpark = {minLot:0, minLotItems:[], maxLot:0, maxLotItems:[]};\n      },\n      getCategory(total) {\n        switch (true) {\n         case total < 100:\n            return \"small\";\n         case total >=100 && total < 300:\n            return \"med\";\n         case total >=300 && total < 400:\n            return \"big\";\n         default:\n            return \"large\";\n        }\n      },\n      getCarParkData() {\n        axios.get(\"/transport/carpark-availability\").then(response => {\n            this.items = response.data.items[0].carpark_data;\n            this.items.forEach(function(val){\n                var total = 0;\n                val.carpark_info.forEach(item => {\n                    total += parseInt(item.lots_available);\n                });\n                let catname = this.getCategory(total);\n                this.setMinLot(this.$data[`${catname}_carpark`],total,val.carpark_number);\n                this.setMaxLot(this.$data[`${catname}_carpark`],total,val.carpark_number);\n            }.bind(this));\n        }).catch((error) => {\n        console.log(error);\n        }).finally(() => (this.loading = false))\n      },\n      setMinLot(obj, total, carparkNum) {\n        if (obj.minLotItems.length == 0 || total == obj.minLot) {\n          obj.minLot = total;\n          obj.minLotItems.push(carparkNum);\n        } else if (total < obj.minLot) {\n          obj.minLot = total;\n          obj.minLotItems.length = [];\n          obj.minLotItems.push(carparkNum);\n        }\n      },\n      setMaxLot(obj, total, carparkNum) {\n        if (obj.maxLotItems.length == 0 ||total == obj.maxLot) {\n          obj.maxLot = total;\n          obj.maxLotItems.push(carparkNum);\n        } else if (total > obj.maxLot) {\n          obj.maxLot = total;\n          obj.maxLotItems.length = [];\n          obj.maxLotItems.push(carparkNum);\n        } \n      },\n      getAllCarParkNumber(arr) {\n        return arr.join(\", \");\n      }\n    },\n    beforeUnmount() {\n      clearInterval(this.timer)\n    }\n});\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}